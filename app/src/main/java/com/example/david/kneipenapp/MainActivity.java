package com.example.david.kneipenapp;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.Spinner;import android.widget.TextView;import java.util.ArrayList;/** * This program lists all bars in Furtwangen and has the ability to filter them by stars with a spinner */public class MainActivity extends AppCompatActivity {    private ArrayList<Lokal> lokallist = LokalDatasource.getLokalList();    private RecyclerView mRecyclerView;    private RecyclerView.Adapter mAdapter;    private RecyclerView.LayoutManager mLayoutManager;    private Spinner mSpinner;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        mSpinner = (Spinner) findViewById(R.id.spinner); //get the spinner from xml        mSpinner.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() {            @Override            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {                TextView selected = (TextView) view; //get TextView                String starText = (String) selected.getText(); // cast textView to String                int stars;                if (starText.equals("Kein Filter")){                    stars = 0; //set to 0 to tell the filter function in LokalDatasource to show all bars                } else {                    stars = Integer.parseInt(starText.substring(0, 1)); //extract the number of                    // stars and cast to string                }                lokallist = LokalDatasource.filter(stars); //filter by the count of stars which were                // selected by the spinner                recreateAdapter();            }            @Override            public void onNothingSelected(AdapterView<?> parent) {                return;            }        });        //set the Strings for the Spinner        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.stars, android.R.layout.simple_spinner_item);        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);        mSpinner.setAdapter(adapter);        //get RecyclerView from XML        mRecyclerView = (RecyclerView) findViewById(R.id.my_recycler_view);        mRecyclerView.setHasFixedSize(true); //set it with a fixed size, so that content loading is faster        //The LayoutManager organizes the list items and positions the items. In this case they will        // be sorted horizontally by the LinearLayout-Manager        mLayoutManager = new LinearLayoutManager(this);        mRecyclerView.setLayoutManager(mLayoutManager);        //The Adapter manages the connection between the datasource and the RecyclerView. The adapter        // organizes all views and things INSIDE a list item.        mAdapter = new KneipenAdapter(lokallist);        mRecyclerView.setAdapter(mAdapter);    }    /**     * sets the global Lokallist-Variable to the KneipenAdapter. The variable may have been changed     * by the OnItemSelectedListener     */    public void recreateAdapter(){        mAdapter = new KneipenAdapter(lokallist);        mRecyclerView.setAdapter(mAdapter);    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }}